<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard | Pet Adoption</title>
  <style>
    body { font-family: Arial; background: #f9f9f9; padding: 30px; }
    .section { margin-bottom: 40px; background: white; padding: 20px; border-radius: 8px; }
    button { background: #ffc107; border: none; padding: 10px 20px; cursor: pointer; }
    h2 { color: #333; }
  </style>
</head>
<body>
  <h1>ğŸ¾ Admin Dashboard</h1>

  <!-- Admin Login -->
  <div id="login-section" class="section">
    <h2>Admin Login</h2>
    <input type="email" id="admin-email" placeholder="Email" value="admin@petcare.com"><br><br>
    <input type="password" id="admin-pass" placeholder="Password" value="admin123"><br><br>
    <button onclick="adminLogin()">Login</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="section" style="display:none;">
    <h2>Welcome Admin ğŸ‘‹</h2>
    <p id="stats"></p>

    <h3>ğŸ“¦ Donations</h3>
    <ul id="donations"></ul>

    <h3>ğŸ™‹ Volunteers</h3>
    <ul id="volunteers"></ul>

    <h3>ğŸ¶ Adoptions</h3>
    <ul id="adoptions"></ul>

    <h3>ğŸ’¬ Contacts</h3>
    <ul id="contacts"></ul>
  </div>

  <script>
  let token = "";

  async function adminLogin() {
    const email = document.getElementById("admin-email").value;
    const password = document.getElementById("admin-pass").value;

    const res = await fetch("http://localhost:5000/api/admin/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();
    if (data.ok) {
      token = data.token;
      document.getElementById("login-section").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      loadData();
    } else {
      alert("Login failed: " + data.error);
    }
  }

  async function loadData() {
    const urls = ["donations", "volunteers", "adoptions", "contacts"];
    for (let route of urls) {
      const res = await fetch(`http://localhost:5000/api/${route}`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const json = await res.json();

      if (json.ok) {
        const ul = document.getElementById(route);
        ul.innerHTML = "";
        json.data.forEach((entry) => {
          const li = document.createElement("li");
          li.textContent = JSON.stringify(entry);
          ul.appendChild(li);
        });
      }
    }

    // Basic stats
    const donations = await (await fetch("http://localhost:5000/api/donations", { headers: { Authorization: `Bearer ${token}` }})).json();
    const volunteers = await (await fetch("http://localhost:5000/api/volunteers", { headers: { Authorization: `Bearer ${token}` }})).json();

    document.getElementById("stats").innerText =
      `ğŸ’° Total Donations: ${donations.data.length}, ğŸ™‹ Total Volunteers: ${volunteers.data.length}`;
  }
  </script>
</body>
</html>
